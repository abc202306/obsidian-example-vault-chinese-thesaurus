
- [[#é…ç½®]]
- [[#ä¸»é¢˜è¯]]
- [[#ä¸»é¢˜è¯åˆ†ç±»è¡¨]]
- [[#ä¸»é¢˜è¯ç»„é…åˆ†ç±»è¡¨]]

## é…ç½®

- ä¸»é¢˜è¯ - æ–‡ä»¶å¤¹è·¯å¾„:: data/82 æ±‰è¯­ä¸»é¢˜è¯è¡¨/ä¸»é¢˜è¯
- ä¸»é¢˜è¯åˆ†ç±»è¡¨ - æ–‡ä»¶å¤¹è·¯å¾„:: data/82 æ±‰è¯­ä¸»é¢˜è¯è¡¨/ä¸»é¢˜è¯åˆ†ç±»è¡¨
- ä¸»é¢˜è¯ç»„é…åˆ†ç±»è¡¨ - æ–‡ä»¶å¤¹è·¯å¾„:: data/82 æ±‰è¯­ä¸»é¢˜è¯è¡¨/ä¸»é¢˜è¯ç»„é…åˆ†ç±»è¡¨

## ä¸»é¢˜è¯

> å‚è§ [[82 æ±‰è¯­ä¸»é¢˜è¯è¡¨]]

```dataviewjs

/** @function */
const getGroupKey = await new Promise(resolve => dv.view("dvmodule/get-group-key", resolve))


const headers = [
	"File",
	"03 è‹±æ–‡",
	"05 åŒä¹‰è¯",
	"06 ä¸Šä½è¯",
	"07 ä¸‹ä½è¯",
	"08 ç›¸å…³è¯",
	"31 åˆ†ç±»",
	"æ¥æº",
	"file.cday"
];

class ArrayUtil {
	static maxLenLinkArr = 3;
	static clipArr(arr){
		if(arr.length<=this.maxLenLinkArr){
			return arr;
		}
		return [
			...arr.slice(0, this.maxLenLinkArr), 
			"..."
		];
	}
	static getDescriptorItemLinkArr(linkArr){
		return linkArr
			.filter(l=>dv.func.contains(l.path,"/"))
			.map(l=>dv.func.link(
				l.path,
				"ğŸŸ¢"+l.path.replace(
					/(^.*\/)|(\.md$)/g,
					""
				)
			)).concat(linkArr
				.filter(l=>!l.path.includes("/"))
			);
	}
}

class PageProxy {
	#p;
	
	constructor(p){this.#p=p;}
	static get(p){return new this(p)}
	
	getFileLink(){
		return dv.func.link(
			this.#p.file.path, 
			"ğŸŸ¢"+this.#p.file.name
		);
	}
	getEnglish(){
		return this.#p["ä¸»é¢˜è¯-è‹±æ–‡"];
	}
	getSynonyms(){
		return ArrayUtil.clipArr(
			this.#p["ä¸»é¢˜è¯-åŒä¹‰è¯"] || []
		)
	}
	getBroadTerms(){
		return (this.#p["ä¸»é¢˜è¯-ä¸Šä½è¯"] || []).map(l=>
			dv.func.link(
				l.path,
				"ğŸŸ¢"+l.path.replace(
					/(^.*\/)|(\.md$)/g,
					""
				)
			)
		)
	}
	getNarrowerTerms(){
		return ArrayUtil.clipArr(
			ArrayUtil.getDescriptorItemLinkArr(
				this.#p["ä¸»é¢˜è¯-ä¸‹ä½è¯"] || []
			)
		)
	}
	getRelatedTerms(){
		return ArrayUtil.clipArr(
			ArrayUtil.getDescriptorItemLinkArr(
				this.#p["ä¸»é¢˜è¯-ç›¸å…³è¯"] || []
			)
		)
	}
	getClassifications(){
		return (this.#p["ä¸»é¢˜è¯-åˆ†ç±»"] || []).map(l=>
			dv.func.link(
				l.path,
				"ğŸ“—"+l.path.replace(
					/(^.*\/)|(\sä¸»é¢˜è¯è¡¨\.md$)/g,
					""
				)
			)
		)
	}
	getSources(){
		return this.#p["ä¸»é¢˜è¯-æ¥æº"] || []
	}
	getCDay(){
		return this.#p.file.cday;
	}

	getElem(){
		return [
			this.getFileLink(),
			this.getEnglish(),
			this.getSynonyms(),
			this.getBroadTerms(),
			this.getNarrowerTerms(),
			this.getRelatedTerms(),
			this.getClassifications(),
			this.getSources(),
			this.getCDay()
		]
	}
}

function show(){
	dv.container.style.overflowX = "visible";

	const groups = dv
		.pages(`"${dv.current()["ä¸»é¢˜è¯ - æ–‡ä»¶å¤¹è·¯å¾„"]}"`)
		.sort(p=>p.file.ctime, "desc")
		.groupBy(p=>getGroupKey(p));
	
	groups.forEach(g=>{
		dv.header(4, g.key)
		dv.api.table(
			headers, 
			g.rows.map(p=>PageProxy.get(p).getElem()),
			dv.container.createDiv({attr:{style:"overflow:scroll;"}}),
			dv.component,
			dv.currentFilePath
		)
	});
}

show()

```

## ä¸»é¢˜è¯åˆ†ç±»è¡¨

> å‚è§ [[1 ä¸­å›½å›¾ä¹¦é¦†åˆ†ç±»æ³•]]

```dataviewjs



/** @function */
const getGroupKey = await new Promise(resolve => dv.view("dvmodule/get-group-key", resolve))

/** @function */
const getDCDescriptors = await new Promise(resolve => dv.view("dvmodule/get-dc-descriptors", resolve))

const headers = [
	"File",
	"ä¸»é¢˜è¯",
	"ä¸‹ä½ä¸»é¢˜è¯è¡¨",
	"file.cday"
]

function getNarrowerDTable(p){
	return (p["ä¸»é¢˜è¯è¡¨-ä¸‹ä½ä¸»é¢˜è¯è¡¨"]||[])
		.map(l=>dv.func.link(
				l.path,
				"ğŸ“—"+l.path.replace(/(.*\/)|(ç»„é… ä¸»é¢˜è¯è¡¨\.md$)/g,"")
			))
}

function getElem(p){
	return [
		dv.func.link(p.file.path,"ğŸ“—"+p.file.name.replace(" ä¸»é¢˜è¯è¡¨","")),
		getDCDescriptors(p),
		getNarrowerDTable(p),
		p.file.cday
	]
}

dv.container.style.overflowX = "visible";

dv.pages(`"${dv.current()["ä¸»é¢˜è¯åˆ†ç±»è¡¨ - æ–‡ä»¶å¤¹è·¯å¾„"]}"`)
	.sort(p=>p.file.ctime, "desc")
	.groupBy(p=>getGroupKey(p))
	.forEach(g=>{
		dv.header(4, g.key);
		dv.api.table(
			headers, 
			g.rows.map(p=>getElem(p)), 
			dv.container.createDiv({attr:{style:"overflow:scroll"}}),
			dv.component,
			dv.currentFilePath
		)
	})

```


## ä¸»é¢˜è¯ç»„é…åˆ†ç±»è¡¨

> å‚è§ [[1 ä¸­å›½å›¾ä¹¦é¦†åˆ†ç±»æ³•]]

```dataviewjs



/** @function */
const getGroupKey = await new Promise(resolve => dv.view("dvmodule/get-group-key", resolve))

/** @function */
const getDCDescriptors = await new Promise(resolve => dv.view("dvmodule/get-dc-descriptors", resolve))



const headers = [
	"File",
	"ä¸»é¢˜è¯",
	"ä¸Šä½ä¸»é¢˜è¯è¡¨",
	"file.cday"
]

function getBroadDTable(p){
	return (p["ä¸»é¢˜è¯è¡¨-ä¸Šä½ä¸»é¢˜è¯è¡¨"]||[])
		.map(l=>dv.func.link(
				l.path,
				"ğŸ“—"+l.path.replace(/(.*\/)|(ä¸»é¢˜è¯è¡¨\.md$)/g,"")
			))
}

function getElem(p){
	return [
		dv.func.link(p.file.path,"ğŸ“—"+p.file.name.replace(" ç»„é… ä¸»é¢˜è¯è¡¨","")),
		getDCDescriptors(p),
		getBroadDTable(p),
		p.file.cday
	]
}

dv.container.style.overflowX = "visible";

dv.pages(`"${dv.current()["ä¸»é¢˜è¯ç»„é…åˆ†ç±»è¡¨ - æ–‡ä»¶å¤¹è·¯å¾„"]}"`)
	.sort(p=>p.file.ctime, "desc")
	.groupBy(p=>getGroupKey(p))
	.forEach(g=>{
		dv.header(4, g.key);
		dv.api.table(
			headers, 
			g.rows.map(p=>getElem(p)), 
			dv.container.createDiv({attr:{style:"overflow:scroll"}}),
			dv.component,
			dv.currentFilePath
		)
	})

```
